import{Ba as g,Ca as v,Da as H,Ea as k,Fa as I,Ga as r,Ha as o,Ia as p,Ja as S,K as C,Ka as _,La as u,Ma as G,Na as W,O as K,Oa as B,Pa as c,Qa as y,Ra as D,Sa as F,Ta as X,Ua as Y,V as m,Va as V,W as d,Wa as Z,Xa as ee,c as z,ca as A,gb as R,h as J,hb as te,i as q,ib as ie,la as L,ma as l,ob as re,p as U,pa as x,ra as Q,ua as h,wa as b}from"./chunk-KVH2LPRE.js";var $=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-footer"]],decls:5,vars:0,consts:[[1,"w-full","bg-gray-300","py-2","flex","items-center","justify-center"],[1,"text-1xl"],["href","https://forkify-api.herokuapp.com/","target","_blank",1,"font-bold","text-orange-400"]],template:function(e,n){e&1&&(r(0,"footer",0)(1,"h1",1),c(2," Data Collected From "),r(3,"a",2),c(4," Forkify API "),o()()())},encapsulation:2})};var ne=["carrot","broccoli","asparagus","cauliflower","corn","cucumber","green pepper","lettuce","mushrooms","onion","potato","pumpkin","red pepper","tomato","beetroot","brussel sprouts","peas","zucchini","radish","sweet potato","artichoke","leek","cabbage","celery","chili","garlic","basil","coriander","parsley","dill","rosemary","oregano","cinnamon","saffron","green bean","bean","chickpea","lentil","apple","apricot","avocado","banana","blackberry","blackcurrant","blueberry","boysenberry","cherry","coconut","fig","grape","grapefruit","kiwifruit","lemon","lime","lychee","mandarin","mango","melon","nectarine","orange","papaya","passion fruit","peach","pear","pineapple","plum","pomegranate","quince","raspberry","strawberry","watermelon","salad","pizza","pasta","popcorn","lobster","steak","bbq","pudding","hamburger","pie","cake","sausage","tacos","kebab","poutine","seafood","chips","fries","masala","paella","som tam","chicken","toast","marzipan","tofu","ketchup","hummus","maple syrup","parma ham","fajitas","champ","lasagna","poke","chocolate","croissant","arepas","bunny chow","pierogi","donuts","rendang","sushi","ice cream","duck","curry","beef","goat","lamb","turkey","pork","fish","crab","bacon","ham","pepperoni","salami","ribs"];var se=["suggestionItem"],pe=i=>({"bg-gray-100":i});function me(i,t){if(i&1){let e=S();r(0,"li",12,1),_("click",function(){let a=m(e).$implicit,s=u(2),f=B(7);return d(s.emitRecipe(a,f))}),c(2),o()}if(i&2){let e=t.$implicit,n=t.$index,a=u(2);g("ngClass",F(2,pe,n===a.selectedIndex)),l(2),D(" ",e," ")}}function de(i,t){if(i&1&&(r(0,"ul",9),k(1,me,3,4,"li",11,H),o()),i&2){let e=u();l(),I(e.filteredRecipes)}}var M=class i{logoClick=A();inputRecipe=A();suggestionItems=Q("suggestionItem");recipeSuggestions=ne;filteredRecipes=[];showSuggestions=!1;selectedIndex=-1;onInput(t){let e=t.target.value.trim().toLowerCase();e===""?this.filteredRecipes=this.recipeSuggestions:this.filteredRecipes=this.recipeSuggestions.filter(n=>n.toLowerCase().includes(e)),this.showSuggestions=!0}onFocus(){this.filteredRecipes=this.recipeSuggestions,this.showSuggestions=!0}onBlur(){setTimeout(()=>{this.showSuggestions=!1},300)}onKeyDown(t,e){t.key==="ArrowDown"?(t.preventDefault(),this.selectedIndex=(this.selectedIndex+1)%this.filteredRecipes.length,this.scrollToSelected()):t.key==="ArrowUp"?(t.preventDefault(),this.selectedIndex=(this.selectedIndex-1+this.filteredRecipes.length)%this.filteredRecipes.length,this.scrollToSelected()):t.key==="Enter"&&(t.preventDefault(),this.selectedIndex>=0&&this.filteredRecipes.length>0?this.inputRecipe.emit(this.filteredRecipes[this.selectedIndex]):this.inputRecipe.emit(e.value.trim()),e.value="",this.selectedIndex=-1,this.showSuggestions=!1)}emitRecipe(t,e){this.inputRecipe.emit(t),e.value="",this.selectedIndex=-1}scrollToSelected(){let e=this.suggestionItems()[this.selectedIndex]?.nativeElement;e&&e.scrollIntoView({behavior:"instant",block:"nearest"})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-header"]],viewQuery:function(e,n){e&1&&G(n.suggestionItems,se,5),e&2&&W()},outputs:{logoClick:"logoClick",inputRecipe:"inputRecipe"},decls:10,vars:1,consts:[["recipeInput",""],["suggestionItem",""],[1,"w-full","bg-gray-300","p-2","flex","items-center","justify-between"],["src","./logo/logo.png","alt","Site logo",1,"w-20","h-20","ml-5","cursor-pointer",3,"click"],[1,"self-center","flex","flex-col","items-center","max-w-md","w-full","relative"],[1,"p-2","flex","items-center","gap-x-3","bg-white","rounded-full","shadow-md","w-full"],[1,"w-6","h-6","cursor-pointer",3,"click"],["src","./icons/search.png","alt","Search icon",1,"w-5","h-5"],["type","text","placeholder","Search recipe",1,"w-full","bg-transparent","outline-none","text-lg",3,"input","focus","blur","keydown"],[1,"absolute","top-full","mt-2","bg-white","rounded-lg","shadow-md","z-5","w-full","overflow-y-auto","max-h-60"],["src","./icons/colored-heart.png","alt","Colored heart icon",1,"w-8","h-8","mr-5","ml-5","lg:ml-0"],[1,"px-4","py-2","hover:bg-gray-100","cursor-pointer",3,"ngClass"],[1,"px-4","py-2","hover:bg-gray-100","cursor-pointer",3,"click","ngClass"]],template:function(e,n){if(e&1){let a=S();r(0,"header",2)(1,"img",3),_("click",function(){return m(a),d(n.logoClick.emit())}),o(),r(2,"div",4)(3,"div",5)(4,"button",6),_("click",function(){m(a);let f=B(7);return d(n.emitRecipe(f.value,f))}),p(5,"img",7),o(),r(6,"input",8,0),_("input",function(f){return m(a),d(n.onInput(f))})("focus",function(){return m(a),d(n.onFocus())})("blur",function(){return m(a),d(n.onBlur())})("keydown",function(f){m(a);let ce=B(7);return d(n.onKeyDown(f,ce))}),o()(),b(8,de,3,0,"ul",9),o(),p(9,"img",10),o()}e&2&&(l(8),v(n.showSuggestions?8:-1))},dependencies:[R],encapsulation:2})};var T=class i{_loading=new q(!1);loading$=this._loading.asObservable();show(){this._loading.next(!0)}hide(){this._loading.next(!1)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})};function ue(i,t){i&1&&(r(0,"div",0),p(1,"div",1),o())}var N=class i{constructor(t){this.loaderService=t;this.loading$=this.loaderService.loading$}loading$;static \u0275fac=function(e){return new(e||i)(x(T))};static \u0275cmp=h({type:i,selectors:[["app-loader"]],decls:2,vars:3,consts:[[1,"loader-overlay"],[1,"spinner"]],template:function(e,n){e&1&&(b(0,ue,2,0,"div",0),V(1,"async")),e&2&&v(Z(1,1,n.loading$)?0:-1)},dependencies:[te],styles:[".loader-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;display:flex;align-items:center;justify-content:center;z-index:50}.spinner[_ngcontent-%COMP%]{width:3rem;height:3rem;border:.5rem solid #ddd;border-top:.5rem solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var E=class i{_snackBar$=new J;snackBar$=this._snackBar$.asObservable();show(t,e){this._snackBar$.next({message:t,type:e})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})};var ge=(i,t,e)=>({"bg-red-600":i,"bg-green-600":t,"bg-yellow-600":e});function fe(i,t){if(i&1&&(r(0,"div",0),c(1),o()),i&2){let e=u();g("ngClass",Y(2,ge,e.type==="error",e.type==="success",e.type==="warning")),l(),D(" ",e.message," ")}}var O=class i{constructor(t){this.snackBarService=t}message="";type="success";visible=!1;ngOnInit(){this.snackBarService.snackBar$.subscribe(t=>{this.message=t.message,this.type=t.type,this.visible=!0,setTimeout(()=>this.visible=!1,3e3)})}static \u0275fac=function(e){return new(e||i)(x(E))};static \u0275cmp=h({type:i,selectors:[["app-snack-bar"]],decls:1,vars:1,consts:[[1,"fixed","bottom-8","left-1/2","transform","-translate-x-1/2","text-white","px-6","py-3","rounded","transition-all",3,"ngClass"]],template:function(e,n){e&1&&b(0,fe,2,6,"div",0),e&2&&v(n.visible?0:-1)},dependencies:[R],encapsulation:2})};var P=class i{constructor(t){this.http=t}baseUrl="https://forkify-api.herokuapp.com/api/";get(t){return this.http.get(`${this.baseUrl}search?q=${t}`)}getDetail(t){return this.http.get(`${this.baseUrl}get?rId=${t}`)}static \u0275fac=function(e){return new(e||i)(K(re))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})};var _e=(i,t)=>({"h-auto":i,"h-2/3":t}),xe=i=>({"bg-gray-200":i}),be=(i,t)=>t.recipe_id;function ve(i,t){if(i&1){let e=S();r(0,"li",22),_("click",function(){let a=m(e).$implicit,s=u(2);return d(s.getRecipeDetail(a.recipe_id))}),p(1,"img",23),r(2,"div",24)(3,"h2",25),c(4),o(),r(5,"p",26),c(6),o()()()}if(i&2){let e=t.$implicit,n=u(2);g("ngClass",F(4,xe,e.recipe_id===(n.recipeDetail==null||n.recipeDetail.recipe==null?null:n.recipeDetail.recipe.recipe_id))),l(),g("src",e.image_url,L),l(3),y(e.title),l(2),y(e.publisher)}}function ye(i,t){if(i&1&&(r(0,"div",19),p(1,"img",27),r(2,"p",28),c(3),o()()),i&2){let e=t.$implicit;l(3),y(e)}}function Se(i,t){if(i&1){let e=S();r(0,"aside",7)(1,"ul",5),k(2,ve,7,6,"li",8,be),o()(),r(4,"section",9),p(5,"img",10),r(6,"h1",11),c(7),o(),r(8,"h2",12),c(9),o(),r(10,"div",13)(11,"p"),c(12," To access the recipe "),r(13,"a",14),c(14," click here "),o()(),r(15,"div",15),p(16,"img",16),r(17,"p"),c(18,"Social rank: "),r(19,"span",17),c(20),V(21,"number"),o()()()(),r(22,"div",18),k(23,ye,4,1,"div",19,H),o(),r(25,"button",20),_("click",function(){m(e);let a=u();return d(a.addToShoppingList(a.recipeDetail==null||a.recipeDetail.recipe==null?null:a.recipeDetail.recipe.title,a.recipeDetail==null||a.recipeDetail.recipe==null?null:a.recipeDetail.recipe.source_url))}),p(26,"img",21),r(27,"p"),c(28,"Add to Shopping List"),o()()()}if(i&2){let e=u();l(2),I(e.recipes.recipes),l(3),g("src",e.recipeDetail==null||e.recipeDetail.recipe==null?null:e.recipeDetail.recipe.image_url,L),l(2),y(e.recipeDetail==null||e.recipeDetail.recipe==null?null:e.recipeDetail.recipe.title),l(2),y(e.recipeDetail==null||e.recipeDetail.recipe==null?null:e.recipeDetail.recipe.publisher),l(4),g("href",e.recipeDetail==null||e.recipeDetail.recipe==null?null:e.recipeDetail.recipe.publisher_url,L),l(7),y(ee(21,5,e.recipeDetail==null||e.recipeDetail.recipe==null?null:e.recipeDetail.recipe.social_rank,"1.0-2")),l(3),I(e.recipeDetail==null||e.recipeDetail.recipe==null?null:e.recipeDetail.recipe.ingredients)}}function we(i,t){if(i&1){let e=S();r(0,"li",6)(1,"div",29)(2,"h2",30),c(3),o(),r(4,"p"),c(5),r(6,"a",31),c(7,"Click here"),o()()(),r(8,"button",32),_("click",function(){let a=m(e).$index,s=u();return d(s.removeFromShoppingList(a))}),p(9,"img",33),o()()}if(i&2){let e=t.$implicit;l(3),y(e.title),l(2),D(" ",e.recipe," - "),l(),g("href",e.url,L)}}var le=class i{constructor(t,e,n){this.recipeService=t;this.loaderService=e;this.snackBarService=n}currentRecipe="";recipes=null;recipeDetail=null;shoppingList=localStorage.getItem("shoppingList")?JSON.parse(localStorage.getItem("shoppingList")||"[]"):[];searchRecipe(t){return z(this,null,function*(){try{this.loaderService.show(),this.currentRecipe=t,this.recipes=yield U(this.recipeService.get(t)),yield this.getRecipeDetail(this.recipes?.recipes?.[0].recipe_id)}catch{this.recipes=null,this.recipeDetail=null,this.snackBarService.show("Error while searching recipe.","error")}finally{this.loaderService.hide()}})}getRecipeDetail(t){return z(this,null,function*(){if(this.recipeDetail?.recipe?.recipe_id!==t)try{this.loaderService.show(),this.recipeDetail=yield U(this.recipeService.getDetail(t))}catch{this.recipes=null,this.recipeDetail=null,this.snackBarService.show("Error while getting recipe detail.","error")}finally{this.loaderService.hide()}})}addToShoppingList(t,e){let n=JSON.parse(localStorage.getItem("shoppingList")||"[]");if(n.some(f=>f.title===t))return this.snackBarService.show("Recipe already exists in shopping list.","warning");let s=[...n,{recipe:this.currentRecipe,title:t,url:e}];localStorage.setItem("shoppingList",JSON.stringify(s)),this.shoppingList=s}removeFromShoppingList(t){let e=JSON.parse(localStorage.getItem("shoppingList")||"[]");e.splice(t,1),localStorage.setItem("shoppingList",JSON.stringify(e)),this.shoppingList=e}static \u0275fac=function(e){return new(e||i)(x(P),x(T),x(E))};static \u0275cmp=h({type:i,selectors:[["app-home"]],decls:13,vars:5,consts:[[1,"h-screen","flex","flex-col"],[3,"inputRecipe","logoClick"],[1,"flex-1","flex","flex-col","lg:flex-row","items-center","justify-center","overflow-hidden","bg-gray-100"],[1,"w-full","lg:w-1/4","lg:h-full","overflow-y-auto","p-4",3,"ngClass"],[1,"text-2xl","text-orange-400","font-bold","text-center"],[1,"px-4"],[1,"flex","items-center","justify-between","gap-y-3","p-2","my-4","border","border-gray-300","rounded-lg"],[1,"w-full","lg:w-1/4","h-2/3","lg:h-full","overflow-y-auto"],[1,"flex","items-center","gap-x-3","p-2","my-4","border","border-gray-300","rounded-lg","cursor-pointer","hover:bg-gray-200","transition",3,"ngClass"],[1,"w-full","lg:w-2/4","h-auto","lg:h-full","overflow-y-auto","p-4","flex","flex-col","gap-y-4"],["alt","Recipe image",1,"w-full","h-1/3","object-cover","rounded-lg",3,"src"],[1,"text-3xl","text-orange-400","font-bold","text-center"],[1,"text-lg","text-center"],[1,"flex","items-center","justify-around","font-base"],["target","_blank",1,"font-bold-400","text-orange-400","underline",3,"href"],[1,"flex","items-center","gap-x-2"],["src","./icons/star.png","alt","Star icon",1,"w-6","h-6"],[1,"font-bold"],[1,"flex-1","grid","grid-cols-2","gap-x-6","gap-y-4","p-4"],[1,"flex","items-center","gap-2"],[1,"flex","gap-x-2","p-3","self-center","bg-orange-400","text-white","rounded-full","shadow-md","cursor-pointer","hover:bg-orange-500","transition",3,"click"],["src","./icons/shopping-cart.png","alt","Shopping cart icon",1,"w-6","h-6"],[1,"flex","items-center","gap-x-3","p-2","my-4","border","border-gray-300","rounded-lg","cursor-pointer","hover:bg-gray-200","transition",3,"click","ngClass"],["alt","Recipe image",1,"w-12","h-12","rounded-full","border","border-gray-300","object-cover","shrink-0",3,"src"],[1,"flex","flex-col","gap-2","min-w-0"],[1,"text-lg","text-orange-400","truncate"],[1,"text-sm","truncate"],["src","./icons/check-mark.png","alt","Check icon",1,"w-6","h-6"],[1,"text-base","text-justify"],[1,"self-start","flex","flex-col","gap-2","max-w-[85%]"],[1,"text-base","lg:text-lg","text-orange-400","truncate"],["target","_blank",1,"text-sm","truncate","cursor-pointer","underline",3,"href"],[1,"p-2","text-white","rounded-full","cursor-pointer","hover:bg-gray-200","transition",3,"click"],["src","./icons/trash-can.png","alt","Trash icon",1,"w-5","h-5","lg:w-6","lg:h-6"]],template:function(e,n){e&1&&(p(0,"app-loader")(1,"app-snack-bar"),r(2,"div",0)(3,"app-header",1),_("inputRecipe",function(s){return n.searchRecipe(s)})("logoClick",function(){return n.recipes=null,n.recipeDetail=null}),o(),r(4,"main",2),b(5,Se,29,8),r(6,"section",3)(7,"h1",4),c(8,"My Shopping List"),o(),r(9,"ul",5),k(10,we,10,3,"li",6,H),o()()(),p(12,"app-footer"),o()),e&2&&(l(5),v(n.recipes?5:-1),l(),g("ngClass",X(2,_e,!n.recipes,n.recipes)),l(4),I(n.shoppingList))},dependencies:[$,M,N,O,R,ie],encapsulation:2})};export{le as HomeComponent};
